{% from "govuk/components/character-count/macro.njk" import govukCharacterCount %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "components/errorSummaryComponent.njk" import errorSummary %}

<h2 class="govuk-heading-m">{{ t('pages.caseDetails.tabs.caseDetails') }}</h2>

<h3 class="govuk-heading-s">{{ t('pages.caseDetails.caseDetailsSection.clientProblemTitle') }}</h3>
<div class="govuk-hint">body text<div>
<p class="govuk-body">body text</p>

<h3 class="govuk-heading-s">{{ t('pages.caseDetails.caseDetailsSection.operatorDiagnosisTitle') }}</h3>
<p class="govuk-body">body text</p>

<h3 class="govuk-heading-s">{{ t('pages.caseDetails.caseDetailsSection.operatorNotesTitle') }}</h3>
<p class="govuk-body">body text</p>

<h3 class="govuk-heading-s">{{ t('pages.caseDetails.caseDetailsSection.providerNotesTitle') }}</h3>
<div class="govuk-hint">body text<div>
<p class="govuk-body">body text</p>

{% block formContent %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
      {% if error %}
        {{ errorSummary(error.errorSummaryList) }}
        {% set errorMessages = {
          providerNote: {text: error.inputErrors.providerNote } if error.inputErrors.providerNote
        } %}
      {% endif %}

      <h3 class="govuk-heading-s">{{ t('pages.caseDetails.caseDetailsSection.noteLabel') }}</h3>

      <form method="post" action="">
        <input type="hidden" name="_csrf" value="{{ csrfToken }}">
          {{ govukCharacterCount({
            id: "providerNote",
            name: "providerNote",
            value: currentProviderNote,
            errorMessage: errorMessages.providerNote if error,
            maxlength: maxProviderNoteLength,
            threshold: characterThreshold
          }) }}

          {{ govukButton({
            text: t('common.save')
          }) }}
      </form>
    </div>
  </div>
{% endblock %}