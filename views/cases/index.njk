{% extends "base.njk" %}

{% block pageTitle %}
  {%- if activeTab == 'opened' -%}
    {{ t.pages.yourCases.pageTitles.opened | replace('{serviceName}', config.SERVICE_NAME) }}
  {%- elif activeTab == 'accepted' -%}
    {{ t.pages.yourCases.pageTitles.accepted | replace('{serviceName}', config.SERVICE_NAME) }}
  {%- elif activeTab == 'closed' -%}
    {{ t.pages.yourCases.pageTitles.closed | replace('{serviceName}', config.SERVICE_NAME) }}
  {%- else -%}
    {{ t.pages.yourCases.pageTitles.new | replace('{serviceName}', config.SERVICE_NAME) }}
  {%- endif -%}
{% endblock %}

{% block pageContent %}
  {#
    Cases page with server-side tab navigation
    Using the reusable tabComponent macro for clean, maintainable tab implementation
  #}

  {# Import the tabComponent macro #}
  {%- from "components/tabComponent.njk" import tabComponent -%}

  {# Main page heading - changes based on active tab #}
  <h1 class="govuk-heading-xl" id="page-heading">
    {%- if activeTab == 'opened' -%}
        {{ t.pages.yourCases.openedCases }}
      {%- elif activeTab == 'accepted' -%}
        {{ t.pages.yourCases.acceptedCases }}
      {%- elif activeTab == 'closed' -%}
        {{ t.pages.yourCases.closedCases }}
      {%- else -%}
        {{ t.pages.yourCases.newCases }}
      {%- endif -%}
  </h1>

  {# Use the reusable tabComponent for navigation and content #}
  {{ tabComponent({
    activeTab: activeTab,
    containerId: "cases-tab-container",
    data: data,
    sortOrder: sortOrder,
    pagination: pagination,
    tabs: [
      {
        id: "new",
        text: t.common.status.new,
        href: "/cases/new",
        partial: "cases/_new-partial.njk"
      },
      {
        id: "opened",
        text: t.common.status.opened,
        href: "/cases/opened",
        partial: "cases/_opened-partial.njk"
      },
      {
        id: "accepted",
        text: t.common.status.accepted,
        href: "/cases/accepted",
        partial: "cases/_accepted-partial.njk"
      },
      {
        id: "closed",
        text: t.common.status.closed,
        href: "/cases/closed",
        partial: "cases/_closed-partial.njk"
      }
    ]
  }) }}
{% endblock %}