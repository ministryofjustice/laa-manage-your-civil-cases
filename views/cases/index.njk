{% extends "base.njk" %}

{% block content %}
  {#
    Cases page with server-side tab navigation
    Using the reusable tabComponent macro for clean, maintainable tab implementation
  #}

  {# Import the tabComponent macro #}
  {%- from "components/tabComponent.njk" import tabComponent -%}

  {# Main page heading - changes based on active tab #}
  <h1 class="govuk-heading-xl" id="page-heading">
    {%- if activeTab == 'opened' -%}
        Opened cases
      {%- elif activeTab == 'accepted' -%}
        Accepted cases
      {%- elif activeTab == 'closed' -%}
        Closed cases
      {%- else -%}
        New cases
      {%- endif -%}
  </h1>

  {# Tab navigation using MOJ Design System #}
  {%- from "moj/components/sub-navigation/macro.njk" import mojSubNavigation -%}
  {{ mojSubNavigation({
    label: "Sub navigation",
    items: [
      { text: "New", href: "/cases/new", active: (activeTab == "new") },
      { text: "Opened", href: "/cases/opened", active: (activeTab == "opened") },
      { text: "Accepted", href: "/cases/accepted", active: (activeTab == "accepted") },
      { text: "Closed", href: "/cases/closed", active: (activeTab == "closed") }
    ]
  }) }}

  {# Tab content rendering #}
  <div class="tab-content-container">
    {% if activeTab == "new" %}
      {% include "cases/_new-partial.njk" %}
    {% elif activeTab == "opened" %}
      {% include "cases/_opened-partial.njk" %}
    {% elif activeTab == "accepted" %}
      {% include "cases/_accepted-partial.njk" %}
    {% elif activeTab == "closed" %}
      {% include "cases/_closed-partial.njk" %}
    {% endif %}
  </div>
{% endblock %}