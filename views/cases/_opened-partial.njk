{#
  Opened Cases Content Partial
  Displays sortable table of opened cases with pagination
#}

{# Import the sortable table and pagination components #}
{%- from "components/sortableTableComponent.njk" import sortableTableComponent -%}
{%- from "components/paginationComponent.njk" import paginationComponent -%}

{% if data and data.length > 0 %}
  {# Render the sortable table #}
  {{ sortableTableComponent({
      id: "opened-cases-table",
      data: data,
      columns: [
        { key: "full_name", text: t('components.table.columns.name'), link: "/cases/{{reference}}/client-details" },
        { key: "reference", text: t('components.table.columns.caseId') },
        { key: "date_of_birth", text: t('components.table.columns.dateOfBirth') },
        { key: "outcome_description", text: t('components.table.columns.details') },
        { key: "modified", text: t('components.table.columns.dateModified'), sortable: true, classes: "govuk-table__header--numeric" , cellClasses: "govuk-table__cell--numeric" }
      ],
      sortBy: sortBy or "modified",
      sortOrder: sortOrder or "desc",
      basePath: "/cases/opened"
    }) }}

  {# Render pagination if pagination data is available #}
  {% if pagination %}
    {{ paginationComponent({
      pagination: pagination,
      sortBy: sortBy or "modified",
      sortOrder: sortOrder or "desc",
      basePath: "/cases/opened"
    }) }}
  {% endif %}
{% else %}
  <p>There are no opened cases.</p>
{% endif %}